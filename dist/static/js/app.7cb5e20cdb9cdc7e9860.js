webpackJsonp([12],{148:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(217),o=n.n(a);e.default={name:"app",components:{"v-head":o.a},data:function(){return{activeName:"second"}},methods:{handleClick:function(t,e){console.log(t,e)}}}},149:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(92);e.default={data:function(){return{users:null}},mounted:function(){console.log(this.users)},created:function(){var t=this;a.a.getUser().then(function(e){401===e.status?(t.$router.push("/login"),t.$store.dispatch("UserLogout")):t.users=e.data.result})}}},150:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),o=n(90),s=n.n(o),i=n(51),r=n(79),c=n.n(r),u=n(89),l=(n.n(u),n(31));a.default.use(c.a),a.default.config.productionTip=!0,new a.default({el:"#app",router:i.a,store:l.a,template:"<App/>",components:{App:s.a}})},151:function(t,e,n){"use strict";var a=n(65);e.a={UserLogin:function(t,e){(0,t.commit)(a.a,e)},UserLogout:function(t){(0,t.commit)(a.b)},UserName:function(t,e){(0,t.commit)(a.c,e)}}},152:function(t,e,n){"use strict";var a,o=n(158),s=n.n(o),i=n(65),r=(a={},s()(a,i.a,function(t,e){t.token=e,window.sessionStorage.setItem("token",e)}),s()(a,i.b,function(t){t.token=null,window.sessionStorage.removeItem("token")}),s()(a,i.c,function(t,e){t.username=e,window.sessionStorage.setItem("username",e)}),a);e.a=r},212:function(t,e){},213:function(t,e){},217:function(t,e,n){n(213);var a=n(52)(n(149),n(219),"data-v-8a7e45e2",null);t.exports=a.exports},218:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",[n("div",{staticClass:"head-wrap clearfix"},[n("h1",{staticClass:"head-title"},[n("router-link",{attrs:{to:"/",tag:"span"}},[n("span",{staticClass:"head-logoB"}),t._v(" "),n("span",{staticClass:"head-logobest"})])],1),t._v(" "),n("section",{staticClass:"head-nav"},[n("v-head")],1)])]),t._v(" "),n("router-view")],1)},staticRenderFns:[]}},219:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"aside-nav"},[n("ul",{staticClass:"aside-nav-list"},[n("router-link",{staticClass:"aside-nav-list",attrs:{to:"/icolist",tag:"li","active-class":"active"}},[t._v("\n            ICOs\n        ")]),t._v(" "),n("router-link",{staticClass:"aside-nav-list",attrs:{to:"/news",tag:"li","active-class":"active"}},[t._v("\n            项目新闻\n        ")]),t._v(" "),n("router-link",{staticClass:"aside-nav-list",attrs:{to:"/profile",tag:"li","active-class":"active"}},[t._v("\n            个人中心\n        ")]),t._v(" "),t.users?n("li",{staticClass:"aside-nav-list"},[t._v("您好，"+t._s(t.users.username)+"}")]):n("router-link",{staticClass:"aside-nav-list",attrs:{to:"/login",tag:"li","active-class":"active"}},[t._v("\n            登录/注册\n        ")])],1)])},staticRenderFns:[]}},31:function(t,e,n){"use strict";var a=n(3),o=n(222),s=n(152),i=n(151);a.default.use(o.a);var r={token:window.sessionStorage.getItem("token"),username:""};e.a=new o.a.Store({state:r,mutations:s.a,actions:i.a})},51:function(t,e,n){"use strict";var a=n(3),o=n(31),s=n(220);a.default.use(s.a);var i=function(t){n.e(2).then(function(){t(n(104))}.bind(null,n)).catch(n.oe)},r=function(t){n.e(6).then(function(){t(n(97))}.bind(null,n)).catch(n.oe)},c=function(t){n.e(7).then(function(){t(n(101))}.bind(null,n)).catch(n.oe)},u=function(t){n.e(3).then(function(){t(n(102))}.bind(null,n)).catch(n.oe)},l=function(t){n.e(0).then(function(){t(n(103))}.bind(null,n)).catch(n.oe)},f=function(t){n.e(8).then(function(){t(n(100))}.bind(null,n)).catch(n.oe)},d=function(t){n.e(9).then(function(){t(n(99))}.bind(null,n)).catch(n.oe)},p=function(t){n.e(1).then(function(){t(n(105))}.bind(null,n)).catch(n.oe)},h=function(t){n.e(5).then(function(){t(n(106))}.bind(null,n)).catch(n.oe)},v=function(t){n.e(4).then(function(){t(n(107))}.bind(null,n)).catch(n.oe)},m=function(t){n.e(10).then(function(){t(n(98))}.bind(null,n)).catch(n.oe)},g=new s.a({mode:"history",routes:[{path:"/",name:"Home",component:u},{path:"/icolist",name:"List",component:l},{path:"/icodetail/:id",name:"Detail",component:f},{path:"/profile",name:"Hello",component:c,meta:{requiresAuth:!0}},{path:"/crm",name:"Crm",component:d},{path:"/news",name:"News",component:p},{path:"/news/:id",name:"NewsDetail",component:h},{path:"/newseditor",name:"NewsEditor",component:v},{path:"/login",name:"login",component:i},{path:"/register",name:"register",component:r},{path:"*",name:"error",component:m}]});g.beforeEach(function(t,e,n){var a=o.a.state.token;t.meta.requiresAuth?a?n():n({path:"/login",query:{redirect:t.fullPath}}):n()}),e.a=g},65:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s});var a="LOGIN",o="LOGOUT",s="USERNAME"},89:function(t,e){},90:function(t,e,n){n(212);var a=n(52)(n(148),n(218),"data-v-23fc9dcd",null);t.exports=a.exports},92:function(t,e,n){"use strict";var a=n(155),o=n.n(a),s=n(91),i=n.n(s),r=n(31),c=n(51);i.a.defaults.timeout=5e3,i.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8";var u=i.a.create();u.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",i.a.interceptors.request.use=u.interceptors.request.use,u.interceptors.request.use(function(t){return r.a.state.token&&(t.headers.Authorization="token "+r.a.state.token),t},function(t){return o.a.reject(t)}),u.interceptors.response.use(function(t){return t},function(t){if(t.response)switch(t.response.status){case 401:r.a.dispatch("UserLogout"),c.a.replace({path:"login",query:{redirect:c.a.currentRoute.fullPath}})}return o.a.reject(t.response)}),e.a={userRegister:function(t){return u.post("/api/register",t)},userLogin:function(t){return u.post("/api/login",t)},getUser:function(){return u.get("/api/user")},delUser:function(t){return u.post("/api/delUser",t)}}}},[150]);
//# sourceMappingURL=app.7cb5e20cdb9cdc7e9860.js.map